# ๐ ูุธุงู ุงููุญุงุณุจุฉ - OFOQ Accounting Module

## โ ุงููููุงุช ุงูููุดุฃุฉ

ุชู ุฅูุดุงุก ุฌููุน ุตูุญุงุช ูุธุงู ุงููุญุงุณุจุฉ ุจูุฌุงุญ:

### ๐ ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ
1. **accounting.html** - ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ ูููุญุงุณุจุฉ
2. **inventory.html** - ุฅุฏุงุฑุฉ ุงููุฎุฒูู
3. **sales.html** - ุฅุฏุงุฑุฉ ุงููุจูุนุงุช
4. **pos-scanner.html** - ููุทุฉ ุงูุจูุน ูุน ูุงุณุญ ุงูุจุงุฑููุฏ
5. **sale-review.html** - ูุฑุงุฌุนุฉ ุงูุจูุน ูุจู ุงูุชุฃููุฏ
6. **invoices.html** - ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
7. **invoice-form.html** - ูุงุชูุฑุฉ ุดุฑุงุก ูุฏููุฉ

### ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช
8. **create-accounting-tables.sql** - โ ุชู ุชูููุฐูุง (6 ุฌุฏุงูู ูุน RLS ูุงููุดุบูุงุช)
9. **add-accounting-service.sql** - ูุฅุถุงูุฉ ุฎุฏูุฉ ุงููุญุงุณุจุฉ ููุดุฑูุงุช

---

## ๐ ููููุฉ ุงูุจุฏุก

### ุงูุฎุทูุฉ 1๏ธโฃ: ุชูุนูู ุฎุฏูุฉ ุงููุญุงุณุจุฉ ููุดุฑูุฉ
ูู ุจุชุดุบูู ุงูุฃูุฑ SQL ุงูุชุงูู ูู Supabase ูุชูุนูู ุฎุฏูุฉ ุงููุญุงุณุจุฉ:

```sql
-- ุฃููุงู: ุฅุถุงูุฉ ุฎุฏูุฉ ุงููุญุงุณุจุฉ
INSERT INTO services (name, description)
VALUES ('accounting', 'ุฎุฏูุฉ ุงููุญุงุณุจุฉ - ุฅุฏุงุฑุฉ ุงููุฎุฒููุ ุงููุจูุนุงุชุ ูุงูููุงุชูุฑ')
ON CONFLICT (name) DO NOTHING;

-- ุซุงููุงู: ุชูุนูู ุงูุฎุฏูุฉ ููุดุฑูุฉ (ุงุณุชุจุฏู COMPANY_USER_ID)
INSERT INTO company_services (company_id, service_id, is_active)
SELECT 
    'YOUR_COMPANY_USER_ID'::uuid,
    id,
    true
FROM services
WHERE name = 'accounting'
ON CONFLICT (company_id, service_id) 
DO UPDATE SET is_active = true;
```

### ุงูุฎุทูุฉ 2๏ธโฃ: ุงููุตูู ูููุธุงู
1. ุณุฌู ุงูุฏุฎูู ูุดุฑูุฉ (Company)
2. ุณุชุธูุฑ ุจุทุงูุฉ "ุงููุญุงุณุจุฉ" ูู ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ
3. ุงููุฑ ุนูููุง ููุฏุฎูู ููุธุงู ุงููุญุงุณุจุฉ

---

## ๐ฆ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ช ุฅุฏุงุฑุฉ ุงููุฎุฒูู
- โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ุงูููุชุฌุงุช
- โ ุชุชุจุน ุงููููุงุช ูุงูุฃุณุนุงุฑ
- โ ุชูุจููุงุช ุงููุฎุฒูู ุงูููุฎูุถ (ุชูููู ุฃุญูุฑ ุชููุงุฆู)
- โ ูุธููุฉ ุชุนุจุฆุฉ ุงููุฎุฒูู (Refill)
- โ ุงูุจุญุซ ุจุฑูุฒ ุงูููุชุฌ ุฃู ุงูุงุณู
- โ ุณุฌู ุญุฑูุฉ ุงููุฎุฒูู (Audit Log)

**ููููุฉ ุงูุงุณุชุฎุฏุงู:**
1. ุงูุชุญ `inventory.html`
2. ุงููุฑ "ุฅุถุงูุฉ ููุชุฌ"
3. ุฃุฏุฎู: ุฑูุฒ ุงูููุชุฌุ ุงูุงุณูุ ุณุนุฑ ุงูุดุฑุงุกุ ุณุนุฑ ุงูุจูุนุ ุงููููุฉุ ุงูุญุฏ ุงูุฃุฏูู
4. ุนูุฏ ุงูุฎูุงุถ ุงููููุฉ ุชุญุช ุงูุญุฏ ุงูุฃุฏูู โ ุณูุธูุฑ ุงูููุชุฌ ุจููู ุฃุญูุฑ ุชููุงุฆูุงู
5. ุงุณุชุฎุฏู ุฒุฑ "ุชุนุจุฆุฉ" ูุฅุถุงูุฉ ูููุงุช ุฌุฏูุฏุฉ

### ๐ ููุทุฉ ุงูุจูุน (POS)
- โ ูุงุณุญ ุงูุจุงุฑููุฏ/QR Code (ุจุงุณุชุฎุฏุงู ุงููุงููุฑุง)
- โ ุฅุฏุฎุงู ูุฏูู ูุฑููุฒ ุงูููุชุฌุงุช
- โ ุณูุฉ ูุดุชุฑูุงุช ุชูุงุนููุฉ
- โ ุงูุชุญูู ุงูุชููุงุฆู ูู ุงููุฎุฒูู
- โ ุตูุญุฉ ูุฑุงุฌุนุฉ ูุจู ุงูุชุฃููุฏ
- โ ุฎุตู ุชููุงุฆู ูู ุงููุฎุฒูู ุนูุฏ ุงูุจูุน
- โ ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน ุชููุงุฆูุงู

**ุณูุฑ ุงูุนูู:**
1. ุงูุชุญ `pos-scanner.html` ูู ุตูุญุฉ ุงููุจูุนุงุช
2. ุงูุณุญ ุงูุจุงุฑููุฏ ุจุงููุงููุฑุง ุฃู ุฃุฏุฎู ุฑูุฒ ุงูููุชุฌ ูุฏููุงู
3. ุฃุถู ุฌููุน ุงูููุชุฌุงุช ููุณูุฉ
4. ุงููุฑ "ูุชุงุจุนุฉ ููุฏูุน"
5. ุฑุงุฌุน ุงูุจูุน ูู ุตูุญุฉ `sale-review.html`
6. ุงุฎุชุฑ ุญุงูุฉ ุงูุฏูุน (ูุฏููุน/ูุนูู)
7. ุงููุฑ "ุชุฃููุฏ ุงูุจูุน"
8. ุณูุชู ุชููุงุฆูุงู:
   - ุฎุตู ุงููููุงุช ูู ุงููุฎุฒูู
   - ุฅูุดุงุก ุณุฌู ุจูุน
   - ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน
   - ุชุณุฌูู ุงูุญุฑูุฉ ูู ุณุฌู ุงููุฎุฒูู

### ๐ ุงูููุงุชูุฑ
- โ ุนุฑุถ ุฌููุน ุงูููุงุชูุฑ (ุจูุน + ุดุฑุงุก)
- โ ููุชุฑุฉ ุญุณุจ ุงูููุน ูุญุงูุฉ ุงูุฏูุน
- โ ุงูุจุญุซ ุจุฑูู ุงููุงุชูุฑุฉ
- โ ุนุฑุถ ุชูุงุตูู ุงููุงุชูุฑุฉ
- โ ุทุจุงุนุฉ ุงูููุงุชูุฑ
- โ ููุงุชูุฑ ุงูุจูุน ุชููุดุฃ ุชููุงุฆูุงู
- โ ููุงุชูุฑ ุงูุดุฑุงุก ูุฏููุฉ

**ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก:**
1. ุงูุชุญ `invoices.html`
2. ุงููุฑ "ูุงุชูุฑุฉ ุดุฑุงุก ูุฏููุฉ"
3. ุฃุถู ุงูููุชุฌุงุช ูู ุงููุฎุฒูู
4. ุฃุฏุฎู ุงููููุงุช ูุงูุฃุณุนุงุฑ
5. ุงุญูุธ ุงููุงุชูุฑุฉ
6. ุณูุชู ุชููุงุฆูุงู ุฅุถุงูุฉ ุงููููุงุช ูููุฎุฒูู

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูููุดุฃุฉ:

1. **inventory** - ุงููุฎุฒูู
   - `id`, `company_id`, `product_code`, `product_name`
   - `purchase_price`, `selling_price`, `total_quantity`
   - `min_quantity_alert`, `is_low_stock` (ูุญุณูุจ ุชููุงุฆูุงู)

2. **sales** - ุงููุจูุนุงุช
   - `id`, `company_id`, `sale_number`, `total_amount`
   - `payment_status`, `sale_date`

3. **sale_items** - ุชูุงุตูู ุงููุจูุนุงุช
   - `id`, `sale_id`, `product_code`, `product_name`
   - `quantity`, `unit_price`, `subtotal`

4. **invoices** - ุงูููุงุชูุฑ
   - `id`, `company_id`, `invoice_number`, `invoice_type` (sale/purchase)
   - `total_amount`, `payment_status`, `sale_id`, `notes`

5. **invoice_items** - ุชูุงุตูู ุงูููุงุชูุฑ
   - `id`, `invoice_id`, `product_code`, `product_name`
   - `quantity`, `unit_price`, `subtotal`

6. **inventory_transactions** - ุณุฌู ุญุฑูุฉ ุงููุฎุฒูู
   - `id`, `company_id`, `product_code`, `transaction_type`
   - `quantity`, `previous_quantity`, `new_quantity`
   - `reference_id`, `notes`

### ุงููุดุบูุงุช (Triggers):
- โ `create_invoice_from_sale()` - ุฅูุดุงุก ูุงุชูุฑุฉ ุนูุฏ ุงูุจูุน
- โ `copy_sale_items_to_invoice()` - ูุณุฎ ููุชุฌุงุช ุงูุจูุน ูููุงุชูุฑุฉ

### ุณูุงุณุงุช ุงูุฃูุงู (RLS):
- โ ูู ุดุฑูุฉ ุชุฑู ุจูุงูุงุชูุง ููุท
- โ ุณูุงุณุงุช SELECT, INSERT, UPDATE, DELETE ุนูู ุฌููุน ุงูุฌุฏุงูู

---

## ๐ฏ ููุฒุงุช ูุชูุฏูุฉ

### ุงูุชูุจููุงุช ุงูุชููุงุฆูุฉ
- **ุงููุฎุฒูู ุงูููุฎูุถ**: ุงูููุชุฌุงุช ุชุญุช ุงูุญุฏ ุงูุฃุฏูู ุชูุนุฑุถ ุจููู ุฃุญูุฑ ูู ุฃุนูู ุงููุงุฆูุฉ
- **ุญุงูุฉ ุงูุฏูุน**: ุฃููุงู ูุฎุชููุฉ ููุญุงูุงุช (ุฃุฎุถุฑ=ูุฏููุนุ ุฃุตูุฑ=ูุนููุ ุฃุญูุฑ=ููุบู)

### ุณุฌู ุงููุฎุฒูู (Audit Trail)
ุฌููุน ุงูุนูููุงุช ุชูุณุฌู ุชููุงุฆูุงู:
- ุชุนุจุฆุฉ ุงููุฎุฒูู (refill)
- ุงูุจูุน (sale)
- ุงูุดุฑุงุก (purchase)
- ุงูุชุนุฏูู ุงููุฏูู (adjustment)

### ูุงุณุญ ุงูุจุงุฑููุฏ
- ุงุณุชุฎุฏุงู ููุชุจุฉ `html5-qrcode`
- ุฏุนู QR Code ู Barcode
- ุฅุฏุฎุงู ูุฏูู ูุจุฏูู
- ูุณุญ ูุณุชูุฑ ูุนุฏุฉ ููุชุฌุงุช

---

## ๐ ุงูุฃูุงู

- โ **Row Level Security (RLS)** ุนูู ุฌููุน ุงูุฌุฏุงูู
- โ ุงูุชุญูู ูู ุงูุฏูุฑ (Role) = `company`
- โ ูู ุดุฑูุฉ ุชุฑู ุจูุงูุงุชูุง ููุท
- โ ุงูุชุญูู ูู ุงููุฎุฒูู ูุจู ุงูุจูุน
- โ ููุน ุงูุจูุน ุจูููุงุช ุฃูุจุฑ ูู ุงููุชููุฑ

---

## ๐ฑ ุงูุชูุงูู

- โ ุชุตููู ูุชุฌุงูุจ (Responsive)
- โ ุฏุนู ุงูููุงุชู ูุงูุฃุฌูุฒุฉ ุงูููุญูุฉ
- โ ุฏุนู ูุงููุฑุง ุงููุงุชู ููุณุญ ุงูุจุงุฑููุฏ
- โ ูุงุฌูุฉ ุนุฑุจูุฉ ูุงููุฉ (RTL)

---

## ๐จ ุงูุชุตููู

- **ุงูุฃููุงู ุงูุฑุฆูุณูุฉ:**
  - ุงูุจุฑุชูุงูู: `#D97706` (ุงูุฃุฒุฑุงุฑ ูุงูุนูุงุตุฑ ุงููุนุงูุฉ)
  - ุงูุฏุงูู: `#1E293B` (ุงูุนูุงููู)
  - ุงูุฃุฒุฑู: `#344663` (ุงูุฃุฒุฑุงุฑ ุงูุซุงูููุฉ)
  - ุงูุฃุฎุถุฑ: `#28a745` (ุงููุฌุงุญ ูุงูุญูุธ)
  - ุงูุฃุญูุฑ: `#dc3545` (ุงูุชุญุฐูุฑุงุช ูุงูุญุฐู)

- **ุงูุฎุทูุท:**
  - Cairo (ุฎุท ุนุฑุจู ุงุญุชุฑุงูู)

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ (`accounting.html`) ุชุนุฑุถ:
- โ ุฅุฌูุงูู ุงูููุชุฌุงุช
- โ ูุจูุนุงุช ุงูููู
- โ ุนุฏุฏ ุงูููุชุฌุงุช ุงูููุฎูุถุฉ
- โ ุงูููุงุชูุฑ ุงููุนููุฉ

---

## ๐๏ธ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงูุญุฏ ุงูุฃุฏูู ุงูุงูุชุฑุงุถู ูููุฎุฒูู:
ูู `inventory.html` โ ุงูุณุทุฑ: `value="10"` ูู ุญูู ุงูุญุฏ ุงูุฃุฏูู

### ุชุนุฏูู ุตูุบุฉ ุฑูู ุงููุงุชูุฑุฉ:
ูู `sale-review.html` ู `invoice-form.html`:
```javascript
const invoiceNumber = 'INV-SALE-' + new Date().toISOString()...
```

### ุชุฎุตูุต ุทุจุงุนุฉ ุงูููุงุชูุฑ:
ูู `invoices.html` โ ูุณู `@media print`

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุงุณุญ ุงูุจุงุฑููุฏ** ูุญุชุงุฌ ุฅุฐู ุงููุงููุฑุง ูู ุงููุชุตูุญ
2. **ุงูุชุงุฑูุฎ** ูุณุชุฎุฏู ุงูุชูููู ุงููููุงุฏู (Gregory) ูููุณ ุงููุฌุฑู
3. **ุงูุฃุณุนุงุฑ** ุจุงูุฑูุงู ุงูุนูุงูู (OMR) ุจู 3 ุฎุงูุงุช ุนุดุฑูุฉ
4. **ุญุฐู ุงููุจูุนุงุช** ูุง ูุนูุฏ ุงููููุงุช ูููุฎุฒูู (ููุญูุงูุฉ)
5. **ุญุฐู ุงูููุงุชูุฑ** ูุญุฐู ุงูุชูุงุตูู ุงููุฑุชุจุทุฉ ุชููุงุฆูุงู (CASCADE)

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุจุทุงูุฉ ุงููุญุงุณุจุฉ ูู ุงูุฑุฆูุณูุฉ
**ุงูุญู**: ุชุฃูุฏ ูู ุชูููุฐ `add-accounting-service.sql` ูุชูุนูู ุงูุฎุฏูุฉ ููุดุฑูุฉ

### ุงููุดููุฉ: ุงููุงููุฑุง ูุง ุชุนูู ูู ูุงุณุญ ุงูุจุงุฑููุฏ
**ุงูุญู**: 
- ุชุฃูุฏ ูู ููุญ ุฅุฐู ุงููุงููุฑุง ูููุชุตูุญ
- ุงุณุชุฎุฏู HTTPS ุฃู localhost
- ุงุณุชุฎุฏู ุงูุฅุฏุฎุงู ุงููุฏูู ูุจุฏูู

### ุงููุดููุฉ: ุฎุทุฃ RLS ุนูุฏ ุงูุญูุธ
**ุงูุญู**: ุชุฃูุฏ ูู ุชูููุฐ ุฌููุน ุณูุงุณุงุช RLS ูู `create-accounting-tables.sql`

---

## ๐ ุงูุฏุนู ุงูููู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุฑุงุฌุน:
- ๐ `ACCOUNTING_MODULE_PLAN.md` - ุฎุทุฉ ุงูุชุทููุฑ ุงููุงููุฉ
- ๐๏ธ `create-accounting-tables.sql` - ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## โจ ุงูุชุทููุฑุงุช ุงููุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ ูุงููุฉ
- [ ] ุชุตุฏูุฑ ุงูุจูุงูุงุช (Excel/PDF)
- [ ] ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูููุฎุฒูู ุงูููุฎูุถ
- [ ] ุฏุนู ุนููุงุช ูุชุนุฏุฏุฉ
- [ ] ูุธุงู ุงูุฎุตููุงุช ูุงูุนุฑูุถ
- [ ] ุชูุงูู ูุน ุทุงุจุนุฉ ุงูููุงุชูุฑ ุงูุญุฑุงุฑูุฉ

---

**ุชู ุจูุงุก ุงููุธุงู ุจูุงุณุทุฉ GitHub Copilot** โ
**ุงูุชุงุฑูุฎ**: ุฃูุชูุจุฑ 2025
**ุงูุฅุตุฏุงุฑ**: 1.0.0
